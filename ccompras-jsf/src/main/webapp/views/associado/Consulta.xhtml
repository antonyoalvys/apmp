<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">


	<h:form id="searchForm">
		<p:panel header="Dados da Consulta" style="text-align:center;">
			<div class="ui-g">
				<p:outputLabel value="Nome" for="name" styleClass="ui-g-2" />
				<p:inputText value="#{associateSearchBean.searchEntity.name}" id="name" class="ui-g-10" />
			</div>
			<p:spacer />
			<div class="ui-g">
				<p:outputLabel value="Matricula" for="enrollment" styleClass="ui-g-2" />
				<p:inputText value="#{associateSearchBean.searchEntity.enrollment}" id="enrollment" styleClass="ui-g-4" />

				<p:outputLabel value="Tipo de Associado" for="associateType" styleClass="ui-g-2" />
				<div class="ui-g-4">
					<p:selectOneMenu value="#{associateSearchBean.searchEntity.associateType}" id="associateType">
						<f:selectItems value="#{AssociateType}" var="enum" itemLabel="#{enum.description}" />
					</p:selectOneMenu>
				</div>

			</div>
			<p:spacer />
			<div class="buttons">
				<p:commandButton action="#{associateSearchBean.clear}" value="Limpar" styleClass="span2" process="@form" update="@form" />
				<p:commandButton id="searchBtn" action="#{associateSearchBean.find()}" value="Consultar" styleClass="span2" process="@form" update="@form">
					<p:blockUI block="resultsDataTable" trigger="searchBtn">
			                            #{wds['blockui.processing.txt']}<br />
						<h:graphicImage library="images" name="#{wds['blockui.loading.img']}" />
					</p:blockUI>
				</p:commandButton>

			</div>
			<p:spacer />
			<p:spacer />
			<p:dataTable id="resultsDataTable" value="#{associateSearchBean.associateList}" emptyMessage="Nenhum associado ativo registrado." var="associate">
				<f:facet name="header">Associados Ativos</f:facet>

				<p:column headerText="Opções">
					<p:commandButton id="showCommandButton" icon="ui-icon-search" action="#{associateSearchBean.show(associate)}" title="Exibir" update=":certidaoSituacaoTv"
						oncomplete="javascript:window.location='#associateTv'" process="@this" />
					<p:commandButton id="deleteCommandButton" icon="ui-icon-transferthick-e-w" title="Remover" action="#{associateSearchBean.delete(associate)}" process="@this" update=":associateTv:associateDialog">
						<p:blockUI block="@form" trigger="deleteCommandButton">
                                #{wds['blockui.processing.txt']}<br />
							<h:graphicImage library="images" name="#{wds['blockui.loading.img']}" />
						</p:blockUI>
					</p:commandButton>
				</p:column>
				<p:column headerText="Matricula">
					<h:outputText value="#{associate.enrollment}" />
				</p:column>
				<p:column headerText="Nome">
					<h:outputText value="#{associate.name}" />
				</p:column>
				<p:column headerText="Email">
					<h:outputText value="#{associate.mail}" />
				</p:column>
				<p:column headerText="Telefone Principal">
					<h:outputText value="#{associate.mainPhone}" />
				</p:column>
			</p:dataTable>

		</p:panel>


	</h:form>


</ui:composition>
